{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}

{% block description %}
{% if page.description %}{{ page.description }}{% else %}{{ config.description }}{% endif %}
{% endblock %}

{% block content %}
<article>
    <header>
        <h1>{{ page.title }}</h1>

        <!-- Language Switcher -->
        {% if page.translations %}
        <div style="margin-bottom: 1rem; color: var(--fg3);">
            Also available in: 
            {% for trans in page.translations %}
            <a href="{{ trans.permalink }}" style="color: var(--blue); text-decoration: underline;">
                {% if trans.lang == "en" %}ðŸ‡¬ðŸ‡§ English{% endif %}
                {% if trans.lang == "it" %}ðŸ‡®ðŸ‡¹ Italiano{% endif %}
            </a>
            {% if not loop.last %} | {% endif %}
            {% endfor %}
        </div>
        {% endif %}

        <div class="post-meta">
            {{ page.date | date(format="%Y-%m-%d") }}
            {% if page.reading_time %}
            &nbsp;Â·&nbsp; {{ page.reading_time }} min lettura
            {% endif %}
        </div>
        
        {% if page.taxonomies.tags %}
        <div class="tags">
            {% for tag in page.taxonomies.tags %}
            <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    <div class="content">
        {{ page.content | safe }}
    </div>
    
    <!-- COMMENTI GISCUS -->
    {% if page.extra.comments | default(value=true) %}
    <hr style="margin: 3rem 0; border: 1px solid var(--border);">
    
    <section class="comments">
        <h2 style="margin-bottom: 1.5rem;">Commenti</h2>
        
        <script src="https://giscus.app/client.js"
                data-repo="marc0x71/marc0x71.github.io"
                data-repo-id="R_kgDORKzOCQ"
                data-category="General"
                data-category-id="DIC_kwDORKzOCc4C2Aog"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="top"
                data-theme="dark"
                data-lang="it"
                crossorigin="anonymous"
                async>
        </script>
    </section>
    {% endif %}
</article>
{% endblock %}
