<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ config.title }}{% endblock %}</title>
    
    <meta name="description" content="{% block description %}{{ config.description }}{% endblock %}">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ get_url(path='css/style.css', trailing_slash=false) }}">
    
    <!-- RSS -->
    {% if config.generate_feeds %}
    <link rel="alternate" type="application/atom+xml" title="RSS" href="{{ get_url(path='atom.xml', trailing_slash=false) }}">
    {% endif %}
</head>
<body>
    <div class="container">
        <header>
            {% set lang_prefix = "" %}
            {% if lang == "en" %}
                {% set lang_prefix = "/en" %}
            {% endif %}
            
            <a href="{{ lang_prefix }}/" class="site-title">{{ config.title }}</a>
            <nav>
                <a href="{{ lang_prefix }}/">home</a>
                <a href="{{ lang_prefix }}/blog/">blog</a>
                <a href="{{ lang_prefix }}/about/">about</a>
                <a href="{{ lang_prefix }}/tags/">tags</a>
                
                <!-- Language switcher -->
                {% if lang == "it" %}
                <a href="/en/">ðŸ‡¬ðŸ‡§ EN</a>
                {% else %}
                <a href="/">ðŸ‡®ðŸ‡¹ IT</a>
                {% endif %}
            </nav>
        </header>

        <main>
            {% block content %}{% endblock %}
        </main>

        <footer>
            <p>
                &copy; {{ now() | date(format="%Y") }} {{ config.title }}
                &nbsp;|&nbsp;
                Powered by <a href="https://www.getzola.org/" target="_blank">Zola</a>
                &nbsp;|&nbsp;
                <a href="{{ lang_prefix }}/atom.xml" title="{% if lang == 'it' %}Iscriviti al feed RSS{% else %}Subscribe to RSS feed{% endif %}">RSS ðŸ“¡</a>
            </p>
        </footer>
    </div>
    
    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://marc0x71.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
    
    <script>
      // Non tracciare in localhost
      if (window.location.hostname === 'localhost' || 
          window.location.hostname === '127.0.0.1') {
        window.goatcounter = {no_onload: true};
      }
    </script>
</body>
</html>
